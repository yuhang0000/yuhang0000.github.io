<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>yuhang0000â€¢Blog</title>
<link rel="shortcut icon" href="../favicon.ico">
<style>
.code{
	font-family: monospace;
	background: #e5e5e5;
	display: inline-block;
	padding: 5px;
	/*æˆ‘å±…ç„¶æœƒå¯«styleæ¨£å¼äº†æ¬¸ï¼Œè±ªçˆ½ğŸ˜‹ï¼Œå‚™å¿˜: font-family é¸æ“‡å­—é«”; display ä¸è®“æ§ä»¶ä¸­é–“å‡ºç¾ç©ºéš™; padding å†…é‚Šè·
	 èª’ï¼Œåœ¨é€™è£æ‰“æ³¨é‡‹ä¸èƒ½ç”¨ <!-- --> å’Œ // æ¬¸ã€‚ */
	margin-top: 0px; 
	margin-bottom: 0px
}
.mark{
	background: #e5e5e5;
	display: inline-block;
}
a.link, a.title{
	text-decoration: none;
}
a.link:hover, a.title:hover{ /* é¸æ“‡å™¨ä¸ç”¨ç™½ä¸ç”¨ */
	text-decoration: underline;
	color: #8e0000;
}
.note{
	color: #aaaaaa;
	font-size: 0.75em;
	text-align: center;
}
.readmore{
	color:#8757ad;
	padding:5px;
	user-select:none;
}
.readmore:hover{
	color: #47285e;
}
.picwithnote{
	width: 320px;
	display: flex;
	justify-content: center;
	flex-wrap: wrap;
	padding: 8px
}
.picwithnote div a{
	flex: 1;
	margin: 4px;
	min-width: 0;
}
.pagebtn{
	color: #8757ad;
	cursor: pointer;
}
.pagebtn:hover{
	color: #47285e;
}
.pagenum{
	padding: 4px;
}
.pagenum.checked{
	font-weight: bold;
	text-decoration: underline;
}
.pagenum.hidden{
	display: none;
}
.blog_item{
	border-bottom-style: solid;
    border-bottom-color: #eee;
    border-bottom-width: 2px;
	border-top-style: solid;
    border-top-color: #eee;
    border-top-width: 2px;
    padding-bottom: 16px;
	background: #f6f6f6;
	margin-bottom: 8px;
	transition: border 0.5s, background 0.5s;
}
.blog_item:hover{
    border-bottom-color: #f0f0f0;
    border-top-color: #f0f0f0;
	background: #f9f9f9;
}
h3{
	margin: 0px;
	padding: 16px 0px;
}
</style>
</head>

<body>
<h1><strong>Blog:</strong></h1>
<p><a href="../"><<<è¿”å›ä¸»é </a></p>

<div class="blog_body"></div>

<div class="pagebar" style="display: inline-flex; align-items: center; justify-content: center; flex-wrap: nowrap; user-select: none;">
	<div class="pagelabel" style="margin-right: 8px;">Page 1 of 1</div>
	<div class="pagebtn pagetop">Frist</div>
	<div class="pagenums" style="display: inline-flex; flex-wrap: nowrap; padding: 0px 8px;">
		<div class="pagebtn pagenum checked">1</div>
		<div class="pagebtn pagenum">2</div>
		<div class="pagebtn pagenum">3</div>
		<div class="pagebtn pagenum">4</div>
		<div class="pagebtn pagenum">5</div>
	</div>
	<div class="pagebtn pagebottom">Last</div>
</div>

<p>2025 - yuhang0000</p>

<!--
å¸¸ç”¨çš„åœ–åƒå°ºå¯¸: 
16: 9	width="320px" height="180px"
4: 3		width="320px" height="240px"
32: 9	width="800px" height="225px"
3: 2		width="324px" height="216px"
-->

<!-- å±•é–‹æ›´å¤š -->
<script>
//document.addEventListener('DOMContentLoaded', function() {
function readmorebtn(){
	let button = document.querySelectorAll('.readmore');
	if (button.length > 0){
	  	button.forEach(btn => {
	  		btn.addEventListener('click', function() {
	  			let btn1 = btn.parentElement;
	  			btn1 = btn1.children[0];
	  			if(btn1.style.maxHeight == "none"){
	  				btn1.style.maxHeight = "317px";
	  				btn1.scrollIntoView();
	  				window.scrollTo(0, window.scrollY - 25);
	  				btn.innerText = "å±•é–‹æ›´å¤š";
	  			}
	  			else{
	  				btn1.style.maxHeight = "none";
	  				btn.innerText = "æ”¶å›";
	  			}
				//console.log(btn1.style.maxHeight);
	  		});
			//æ»‘é¼ ç§»å…¥ & ç§»å‡º
			/*btn.addEventListener('mouseover', function() {
				btn.style.color = "#47285e";
			});
			btn.addEventListener('mouseout', function() {
				btn.style.color = "#8757ad";
			});*/
	  	});
	}
}
</script>
<script>
var bloglist; //åˆ—è¡¨
var bloglisturl = './blog.txt'; //ä¸»åˆ—è¡¨åœ°å€
var blogliststep = 10; //æ¯é è®€å–å€‹æ•¸

//é ç¢¼å°èˆªæ¢
var pageitemnum; //ç¸‚é æ•¸
let pagebar = document.querySelector('.pagebar');
let pagebar_label = pagebar.querySelector('.pagelabel');
let pagebar_top = pagebar.querySelector('.pagetop');
let pagebar_bottom = pagebar.querySelector('.pagebottom');
let pagebar_nums = pagebar.querySelectorAll('.pagenum'); 

function oops(msg, url = null, title = null, key = null, value = null){
	if(key != null){
		let url = new URL(window.location.href);
		url.searchParams.set(key, value);
		history.pushState(null,title,url);
	}
	let blog_body = document.querySelector('.blog_body');
	let link = ''
	if(url != null){
		link = '<div style="padding-top: 8px;">è«‹æ±‚é€£æ¥: <a class="link" href="' + url + '" target="_blank">' + url + '</a></div>';
	}
	blog_body.innerHTML = '<div class="blog_item" style="display: inline-block; padding: 8px; white-space: pre-wrap;">' + msg + link + '</div>'
}

//è®€å–éƒ¨è½æ ¼æ¢ç›®
async function readblog(page = 1){
	//ç§»é™¤èˆŠçš„éƒ¨è½æ ¼
	window.scrollTo(0,0);
	let blog_body = document.querySelector('.blog_body');
	for(let num of blog_body.querySelectorAll('.blog_item')){ 
		if(num != null){
			num.remove();
		}
	}
	
	//å‡å¦‚æ²’æœ‰ä»»ä½•éƒ¨è½æ ¼
	if(pageitemnum == 0 || pageitemnum == null){
		oops('é€™è£å¥½åƒä»€éº½éƒ½æœ¨æœ‰.',null,null,'page', 1);
		return;
	}
	
	//å‡å¦‚é ç¢¼è¶…å‡ºç¯„åœ
	if(page == null || page < 1){
		page = 1;
		let url = new URL(window.location.href);
		url.searchParams.set('page', 1);
		history.pushState(null,null,url);
		//return;
	}
	else if(page > pageitemnum){
		page = pageitemnum;
		let url = new URL(window.location.href);
		url.searchParams.set('page', pageitemnum);
		history.pushState(null,null,url);
	}
	
	//æ›´æ–°é ç¢¼
	let num2 = page - 2;
	if(num2 < 1){
		num2 = 1;
	}
	else if(num2 > pageitemnum - 4){
		num2 = pageitemnum - 4;
	}
	for(let num of pagebar_nums){
		if(num2 == page){
			num.classList.add('checked');
		}
		else{
			num.classList.remove('checked');
		}
		//debugger;
		if(num2 < 1 || num2 > pageitemnum){
			num.classList.add('hidden');
		}
		else{
			num.classList.remove('hidden');
		}
		num.innerText = num2;
		num2++;
	}
	pagebar_label.innerText = 'Page ' + page + ' of ' + pageitemnum;
	
	//åˆ†åˆ¥åŠ è¼‰éƒ¨è½æ ¼
	for(let num = (page - 1) * blogliststep ; num < page * blogliststep; num++){
		if(num >= bloglist.length){ //è¶…å‡ºåˆ—è¡¨ç´¢å¼•ç¯„åœ
			break;
		}
		let url = bloglist[num];
		if(url == '' || url == null || url == './'){
			continue;
		}
		await fetch(url.trim())
			.then(response => {
				if(response.ok == true){
					return response.text();
				}
				else{
					return null;
				}
			})
			.then(data => {
				if(data != null){
					blog_body.innerHTML = blog_body.innerHTML + '<div class="blog_item">' + data + '</div>';
				}
				else{
					blog_body.innerHTML = blog_body.innerHTML + '<div class="blog_item" style="padding: 8px;">' + 'è¼‰å…¥å¤±æ•—å“©...' + '</div>';
				}
			})
			.catch(error => {
				//debugger;
				oops('oops! \n  ' + error, url.trim(),null,'page', 1);
			});
	}
	
	//å±•é–‹æŒ‰éˆ•
	readmorebtn();
}

//è®€å–éƒ¨è½æ ¼åˆ—è¡¨
async function readbloglist(){
	try{
		await fetch(bloglisturl)
			.then(response => {
				if(response.ok == true){
					return response.text();
				}
				else{
					oops('oops! \n  (' + response.status + ') ' + response.statusText, response.url,null,'page', 1);
					return null;
				}
			})
			.then(data => {
				//console.log(data);

				if(data == null){
					return false;
				}
				
				//ç¯©é¸åˆ—è¡¨
				bloglist = new Array();
				for(let list of data.split('\r\n')){
					if(list == null || list == '' || list == './'){
						continue;
					}
					bloglist.push(list.trim());
				}
				
				//console.log(bloglist);
				//console.log( bloglist.length / blogliststep );
				//pageitemnum = parseInt(bloglist.length / blogliststep) + 1;
				
				//è¨ˆç®—åˆ†é æ•¸é‡
				pageitemnum = bloglist.length / blogliststep; 
				if(String(pageitemnum).indexOf('.') != -1){
					if(pageitemnum != 0){
						pageitemnum = parseInt(pageitemnum) + 1;
					}
				}
				//console.log(pageitemnum);
				
				//ç²å–ç•¶å‰é ç¢¼
				let url = new URL(window.location.href);
				readblog( url.searchParams.get('page') );
			})
			.catch(error => {
				oops('oops! \n  ' + error, bloglisturl,null,'page', 1);
				//console.log('oops! \n' + error);
			});
	}
	catch (ex){
		oops('oops! \n  ' + ex, bloglisturl,null,'page', 1);
		//console.log('oops! \n' + ex);
	}
}

//ä¸»ç¨‹å¼
async function main(){
	await readbloglist();
	let url = new URL(window.location.href);
	//pagebar_label.innerText = 'Page ' + url.searchParams.get('page') + ' of ' + pageitemnum;
	pagebar_top.addEventListener('click', () => { //æœ€æ–°
		url.searchParams.set('page', 1);
		history.pushState(null,null,url);
		//pagebar_label.innerText = 'Page ' + url.searchParams.get('page') + ' of ' + pageitemnum;
		readblog(1)
	});
	pagebar_bottom.addEventListener('click', () => { //æœ€èˆŠ
		url.searchParams.set('page', pageitemnum);
		history.pushState(null,null,url);
		//pagebar_label.innerText = 'Page ' + url.searchParams.get('page') + ' of ' + pageitemnum;
		readblog(pageitemnum)
	});
	for(let num of pagebar_nums){ //æŒ‡å®šé ç¢¼
		num.addEventListener('click', () => {
			url.searchParams.set('page', num.innerText);
			history.pushState(null,null,url);
			//pagebar_label.innerText = 'Page ' + url.searchParams.get('page') + ' of ' + pageitemnum;
			readblog(num.innerText)
		});
	}
	
}

main();
</script>

</body>
</html>
